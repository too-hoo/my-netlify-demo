<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Netlify å…¨æ ˆé™æ€ç«™ Demo</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
    <header>
        <h1>æ¬¢è¿æ¥åˆ°æˆ‘çš„å®¢æœç«™ç‚¹</h1>
        <div id="auth-controls">
            <div data-netlify-identity-menu></div>
        </div>
    </header>

    <main>
        <section>
            <h2>è”ç³»æˆ‘ä»¬</h2>
            <form name="contact" method="POST" action="/success.html" data-netlify="true">
                <input type="hidden" name="form-name" value="contact" />
                <p>
                    <label>æ‚¨çš„å§“å: <input type="text" name="name" required /></label>
                </p>
                <p>
                    <label>æ‚¨çš„é‚®ç®±: <input type="email" name="email" required /></label>
                </p>
                <p>
                    <label>ç•™è¨€ä¿¡æ¯: <textarea name="message"></textarea></label>
                </p>
                <p>
                    <button type="submit">æäº¤ç”³è¯·</button>
                </p>
            </form>
        </section>

        <section id="member-link" style="display: none;">
            <hr>
            <p>ğŸŒŸ æ£€æµ‹åˆ°æ‚¨å·²ç™»å½•ï¼Œç‚¹å‡»è¿›å…¥ <a href="/admin.html">ä¼šå‘˜ä¸“å±é¡µé¢</a></p>
        </section>
        <div id="user-info" style="display:none;">
            <span>æ¬¢è¿ï¼Œ<span id="display-name"></span>ï¼</span>
            <a href="/profile.html">ä¿®æ”¹èµ„æ–™</a> | 
            <a href="#" onclick="netlifyIdentity.logout()">é€€å‡º</a>
        </div>
    </main>
    <script>
        // åœ¨ script æ ‡ç­¾çš„æœ€å¼€å§‹å¤„æ·»åŠ 
        netlifyIdentity.init({
        locale: 'zh' 
        });
    </script>
    <script>
        netlifyIdentity.on('init', user => {
            if (user) {
                document.getElementById('display-name').innerText = user.user_metadata.full_name || "æ–°ç”¨æˆ·";
                document.getElementById('user-info').style.display = "block";
            }
        });
    </script>
    <script>
        // å¤„ç†ç™»å½•è·³è½¬é€»è¾‘
        netlifyIdentity.on('login', user => {
            document.getElementById('member-link').style.display = 'block';
        });
        netlifyIdentity.on('logout', () => {
            document.getElementById('member-link').style.display = 'none';
        });
    </script>

</body>
</html>